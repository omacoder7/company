document.addEventListener("DOMContentLoaded",function(){const c=document.querySelector(".nav-toggle"),s=document.querySelector(".nav-menu");c&&s&&(c.addEventListener("click",function(){s.classList.toggle("active")}),document.addEventListener("click",function(e){!c.contains(e.target)&&!s.contains(e.target)&&s.classList.remove("active")})),document.querySelectorAll("form[data-ajax]").forEach(e=>{e.addEventListener("submit",function(a){a.preventDefault();const i=new FormData(e),t=e.querySelector('button[type="submit"]'),r=t?t.textContent:"";t&&(t.disabled=!0,t.textContent="Отправка..."),fetch(e.action,{method:"POST",body:i,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then(n=>n.json()).then(n=>{if(n.success){const o=document.createElement("div");o.className="form-success",o.textContent=n.message||"Спасибо! Ваше сообщение отправлено.",e.insertBefore(o,e.firstChild),e.reset(),setTimeout(()=>{o.remove()},5e3)}else alert(n.message||"Произошла ошибка. Попробуйте еще раз.")}).catch(n=>{console.error("Error:",n),alert("Произошла ошибка при отправке формы. Попробуйте еще раз.")}).finally(()=>{t&&(t.disabled=!1,t.textContent=r)})})})});
